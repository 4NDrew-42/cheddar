(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{2705:(e,l,a)=>{Promise.resolve().then(a.bind(a,6821))},6821:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>r});var t=a(5155),s=a(2615),d=a(2115);function i(e){var l;let{post:a,onSave:s}=e,[i,n]=(0,d.useState)({title:(null==a?void 0:a.title)||"",copy:(null==a?void 0:a.copy)||"",mediaUrl:(null==a?void 0:a.mediaUrl)||"",mediaType:(null==a?void 0:a.mediaType)||"image",platform:(null==a?void 0:a.platform)||[],date:(null==a?void 0:a.date)||new Date,status:(null==a?void 0:a.status)||"Draft"}),r=async e=>{e.preventDefault(),await s(i)};return(0,t.jsxs)("form",{onSubmit:r,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Title"}),(0,t.jsx)("input",{type:"text",value:i.title,onChange:e=>n({...i,title:e.target.value}),className:"w-full p-2 border rounded",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Content"}),(0,t.jsx)("textarea",{value:i.copy,onChange:e=>n({...i,copy:e.target.value}),className:"w-full p-2 border rounded",rows:4})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Media URL"}),(0,t.jsx)("input",{type:"url",value:i.mediaUrl,onChange:e=>n({...i,mediaUrl:e.target.value}),className:"w-full p-2 border rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Media Type"}),(0,t.jsxs)("select",{value:i.mediaType,onChange:e=>n({...i,mediaType:e.target.value}),className:"w-full p-2 border rounded",children:[(0,t.jsx)("option",{value:"image",children:"Image"}),(0,t.jsx)("option",{value:"video",children:"Video"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Platforms"}),(0,t.jsx)("input",{type:"text",value:null===(l=i.platform)||void 0===l?void 0:l.join(", "),onChange:e=>n({...i,platform:e.target.value.split(",").map(e=>e.trim())}),className:"w-full p-2 border rounded",placeholder:"Comma separated platforms"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date"}),(0,t.jsx)("input",{type:"datetime-local",value:i.date?new Date(i.date).toISOString().slice(0,16):"",onChange:e=>n({...i,date:new Date(e.target.value)}),className:"w-full p-2 border rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Status"}),(0,t.jsxs)("select",{value:i.status,onChange:e=>n({...i,status:e.target.value}),className:"w-full p-2 border rounded",children:[(0,t.jsx)("option",{value:"Draft",children:"Draft"}),(0,t.jsx)("option",{value:"Scheduled",children:"Scheduled"}),(0,t.jsx)("option",{value:"Published",children:"Published"})]})]}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:a?"Update Post":"Create Post"})]})}var n=a(936);function r(){let{data:e}=(0,s.useSession)(),[l,a]=(0,d.useState)([]);return((0,d.useEffect)(()=>{(null==e?void 0:e.user)&&fetch("/api/posts").then(e=>e.json()).then(e=>a(e))},[e]),e)?(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"My Content Calendar"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)(i,{onSave:async e=>{let t=await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok&&a([...l,await t.json()])}})}),(0,t.jsx)(n.Ay,{tileContent:e=>{let{date:a}=e;return l.map(e=>new Date(e.date).toDateString()).includes(a.toDateString())?(0,t.jsx)("div",{className:"w-1 h-1 bg-blue-500 rounded-full mx-auto"}):null}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Scheduled Posts"}),(0,t.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h3",{className:"font-medium",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.date).toLocaleString()})]},e._id))})]})]})]}):(0,t.jsx)("div",{className:"p-4",children:"Please log in to view your calendar"})}a(6769)}},e=>{var l=l=>e(e.s=l);e.O(0,[0,615,48,441,517,358],()=>l(2705)),_N_E=e.O()}]);